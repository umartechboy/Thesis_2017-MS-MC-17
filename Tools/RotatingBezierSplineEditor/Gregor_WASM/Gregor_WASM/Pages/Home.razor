@page "/"
@using Gregor_WASM.Services
@using RotatingBezierSplineEditor
@using SkiaSharp
@using SkiaSharp.Views.Blazor

<PageTitle>Home</PageTitle>

<MudGrid Style="height: 100vh;">
    <MudItem md="1" Class="px-0 py-0">
        <MudItem md="12">
            <ToolControlView Height="70px" @ref="centerP" OnActivated="centerP_OnActivated"></ToolControlView>
            <ToolControlView Height="70px" @ref="curvatureHandlesP" OnActivated="curvatureHandlesP_OnActivated"></ToolControlView>
            <ToolControlView Height="70px" @ref="rotationHandleP" OnActivated="rotationHandleP_OnActivated"></ToolControlView>
            <MudSpacer/>
            <ToolControlView Height="70px" @ref="bothSplinesP" OnActivated="bothSplinesP_OnActivated"></ToolControlView>
            <ToolControlView Height="70px" @ref="linearSplineOnly" OnActivated="linearSplineOnly_OnActivated"></ToolControlView>
            <ToolControlView Height="70px" @ref="rotatingSplineOnlyP" OnActivated="rotatingSplineOnlyP_OnActivated"></ToolControlView>
        </MudItem>
	</MudItem>
	<MudItem md="8" Class="px-0 py-0">
		<BezierBoardView @ref="bBoardView"></BezierBoardView>
	</MudItem>
    <MudItem md="3">
        <MudAppBar Color="Color.Transparent" Fixed="false" Elevation="0">
            <MudSpacer/>
            <MudIconButton Icon="@Icons.Material.Outlined.MenuOpen" Color="Color.Inherit" OnClick="() => menuOpen = true" />
        </MudAppBar>
        @foreach (var menuItem in documentLayoutFP_Controls)
        {
            <BezierBoardItemMenuItem Base="@menuItem"></BezierBoardItemMenuItem>
        }
    </MudItem>
</MudGrid>


@* Menu *@
<MudItem md="12">
    <MudDrawer @bind-Open="@menuOpen" Anchor="@Anchor.End" Elevation="1" Variant="@DrawerVariant.Temporary">
        <MudNavMenu>
            <MudText Typo="Typo.h6" Class="px-4">Gregor Web</MudText>
            <MudText Typo="Typo.body2" Class="px-4 mud-text-secondary">Main Menu</MudText>
            <MudDivider Class="my-2" />
            <MudNavGroup Title="File" Expanded="false">
                <MudNavLink Icon="@Icons.Material.Filled.FileOpen">Open</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.Save">Save</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.SaveAs">Save as</MudNavLink>
                <MudNavGroup Icon="@Icons.Material.Filled.SaveAlt" Title="Import" Expanded="true">
                    <MudNavLink Icon="@Icons.Material.Filled.ScatterPlot">Spline</MudNavLink>
                    <MudNavLink Icon="@Icons.Material.Filled.Image">Image</MudNavLink>
                </MudNavGroup>
                <MudNavLink Icon="@Icons.Material.Filled.ImportExport">Export</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.ClearAll">Clear all</MudNavLink>
                <MudNavLink Icon="@Icons.Material.Filled.Timer"><MudCheckBox T="bool">Auto save</MudCheckBox></MudNavLink>
            </MudNavGroup>
            <MudDivider Class="my-2" />
            <MudNavGroup Title="View" Expanded="false">
                <MudNavLink Icon="@Icons.Material.Filled.ScatterPlot" Disabled="true">Spline Display</MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@combinedModeToolStripMenuItem_Checked" T="bool" @onclick="combinedModeToolStripMenuItem_Click">Combined Mode</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@combinedModeToolStripMenuItem_Checked" @onclick="inkOnlyToolStripMenuItem_Click" T="bool">Ink Only</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox @bind-Value="@splineOnlyToolStripMenuItem_Checked" T="bool">Spline Only</MudCheckBox></MudNavLink>
                <MudDivider Class="my-2" />
                <MudNavLink Disabled="true">Editor</MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@gridToolStripMenuItem_Checked" @onclick="gridToolStripMenuItem_Click" T="bool">Grid</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@scaleToolStripMenuItem_Checked" @onclick="scaleToolStripMenuItem_Click" T="bool">Scale</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@xYAxisToolStripMenuItem_Checked" @onclick="xYAxisToolStripMenuItem_Click" Disabled="@xYAxisToolStripMenuItem_Disabled" T="bool">X-Y Axiz</MudCheckBox></MudNavLink>
                <MudDivider Class="my-2" />
                <MudNavLink Disabled="true">Worksapce</MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@backgroundImagesToolStripMenuItem" @onclick="backgroundImagesToolStripMenuItem_Click" T="bool">Background Images</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox T="bool">Add Acnchor With Left Click</MudCheckBox></MudNavLink>
                <MudDivider Class="my-2" />
                <MudNavLink><MudSlider T="int">See Through</MudSlider></MudNavLink>
                <MudNavLink><MudCheckBox T="bool">Document Index</MudCheckBox></MudNavLink>
                <MudNavGroup Icon="@Icons.Material.Filled.SaveAlt" Title="Flat Tip Render Mode" Expanded="false">
                    <MudNavLink><MudCheckBox T="bool">Polygons</MudCheckBox></MudNavLink>
                    <MudNavLink><MudCheckBox T="bool">Rectangles</MudCheckBox></MudNavLink>
                </MudNavGroup>
            </MudNavGroup>
            <MudDivider Class="my-2" />
            <MudNavGroup Title="Edit" Expanded="false">
                <MudNavLink Icon="@Icons.Material.Filled.ScatterPlot" Disabled="true">Handles</MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@centerPointsToolStripMenuItem_Checked" @onclick="centerPointsToolStripMenuItem_Click" T="bool">Center Points</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@curvatureHandlesToolStripMenuItem_Checked" @onclick="curvatureHandlesToolStripMenuItem_Click" T="bool">Curvature Handles</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox @bind-value="@rotationHandlesToolStripMenuItem_Checked" @onclick="rotationHandlesToolStripMenuItem_Click" T="bool">Rotation Handles</MudCheckBox></MudNavLink>
                <MudDivider Class="my-2" />
                <MudNavLink Disabled="true">Preferences</MudNavLink>
                <MudNavLink><MudCheckBox Disabled="true" T="bool">Add Anchor with left click</MudCheckBox></MudNavLink>
                <MudNavLink><MudCheckBox Disabled="true" T="bool">Splines can be dragged</MudCheckBox></MudNavLink>
            </MudNavGroup>
            <MudDivider Class="my-2" />
            <MudNavGroup Title="Tools" Expanded="false">
                <MudNavLink Disabled="true">Analyze Trace Accuracy</MudNavLink>
                <MudNavLink Disabled="true">Reset Rotation Handles</MudNavLink>
            </MudNavGroup>
            <MudNavGroup Title="Help" Expanded="false">
                <MudNavLink Disabled="true">How To</MudNavLink>
                <MudNavLink OnClick="aboutToolStripMenuItem1_Click">About</MudNavLink>
            </MudNavGroup>
        </MudNavMenu>
    </MudDrawer>
</MudItem>

@* About Dialog *@

<MudDialog Visible="@aboutDialogOpen" Options="new (){FullWidth = true}">
    <TitleContent>
        <MudText Typo="Typo.h6">
            <MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-3" />About Gregor
        </MudText>
    </TitleContent>
    <DialogContent>
        <h3>Gregor v2.0</h3>
        <p>
            Gregor is a minimalist editor and machine data generator for rotating beizier splines.
            To read more about rotating bezier splines, press F1 or view the program help page.
        </p>
        <h3>Editing</h3>
        <ol>
            <li><p>Click and drag left mouse button on empty space to add spline anchors</p></li>
            <li><p>Right click right mouse button to start a new spline</p></li>
            <li><p>Drag with left mouse the anchors to modify a spline</p></li>
            <li><p>Click a spline to change Pen Width</p></li>
            <li><p>Drag and move objects with left mouse button</p></li>
        </ol>
        <h3>Viewing</h3>
        <ol>
            <li><p>Use Ctrl + V to switch to pan mode.</p></li>
            <li><p>Drag with Left mouse button to pan</p></li>
			<li><p>Drag with Right mouse button to zoom</p></li>
        </ol>
        <h3>File Handling</h3>
        <p>You can save, open and import rotating bezier splines using the File menu</p>


    </DialogContent>
    <DialogActions>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="() => aboutDialogOpen = false" Class="px-10">Close</MudButton>
    </DialogActions>
</MudDialog>
@code {
    bool menuOpen = false;
    bool aboutDialogOpen = false;
    bool backgroundImagesToolStripMenuItem;
    SKImage visibleIconDull, activeIconDull;
    SKImage visibleIcon, activeIcon;
    bool splineOnlyToolStripMenuItem_Checked;
    bool combinedModeToolStripMenuItem_Checked = true;
    bool inkOnlyToolStripMenuItem_Checked;
    bool centerPointsToolStripMenuItem_Checked = true;
    bool curvatureHandlesToolStripMenuItem_Checked = true;
    bool rotationHandlesToolStripMenuItem_Checked;

    bool xYAxisToolStripMenuItem_Enabled = true;
    bool xYAxisToolStripMenuItem_Disabled { get => !xYAxisToolStripMenuItem_Enabled; set => xYAxisToolStripMenuItem_Enabled = !value; }
    bool xYAxisToolStripMenuItem_Checked = true;
    bool gridToolStripMenuItem_Checked = true;
    bool scaleToolStripMenuItem_Checked = true;
    private ToolControlView centerP;
    private ToolControlView curvatureHandlesP;
    private ToolControlView rotationHandleP;
    private ToolControlView bothSplinesP;
    private ToolControlView linearSplineOnly;
    private ToolControlView rotatingSplineOnlyP;
    BezierBoardView bBoardView;
    BezierBoard bezierBoard1 { get => bBoardView.bBoard; }
    List<BezierBoardItemMenuItem> documentLayoutFP_Controls = new List<BezierBoardItemMenuItem>();
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var tc = new ToolControlView();
            visibleIcon = SKImage.FromEncodedData(FileManager.GetBytes("Resources\\visible.png"));
            activeIcon = SKImage.FromEncodedData(FileManager.GetBytes("Resources\\active.png"));
            visibleIconDull = tc.SetImage(visibleIcon, 23);
            activeIconDull = tc.SetImage(activeIcon, 23); ;
            // set images
            centerP.SetImage(SKImage.FromEncodedData(FileManager.GetBytes("Resources\\Center.png")), 65);
            curvatureHandlesP.SetImage(SKImage.FromEncodedData(FileManager.GetBytes("Resources\\CurvatureHandles.png")), 65);
            rotationHandleP.SetImage(SKImage.FromEncodedData(FileManager.GetBytes("Resources\\RotationHandles.png")), 56);
            await centerP.SetDistinctSelection(false);
            await curvatureHandlesP.SetDistinctSelection(false);
            await rotationHandleP.SetDistinctSelection(false);

            // set targets
            centerP.TargetPart = AnchorDrawMode.Centers;
            curvatureHandlesP.TargetPart = AnchorDrawMode.CurvatureHandles;
            rotationHandleP.TargetPart = AnchorDrawMode.RotaionHandles;

            await curvatureHandlesP.SetActive(true);


            bothSplinesP.SetImage(SKImage.FromEncodedData(FileManager.GetBytes("Resources\\bothSplines.png")), 45);
            rotatingSplineOnlyP.SetImage(SKImage.FromEncodedData(FileManager.GetBytes("Resources\\rotatingSplineOnly.png")), 45);
            linearSplineOnly.SetImage(SKImage.FromEncodedData(FileManager.GetBytes("Resources\\splineOnly.png")), 45);



            bezierBoard1.OnBezierBoardItemAdded += BezierBoard1_OnSplineAdded;
            bezierBoard1.OnBezierBoardItemRemoved += BezierBoard1_OnSplineRemoved;
            bezierBoard1.OnRequestToShowAll += async (s, e) => await Con_OnRequestToShowAll(s, e);
            bezierBoard1.OnRequestToUnlockAll += async (s, e) => await Con_OnRequestToUnlockAll(s, e);
            bezierBoard1.OnRequestShowOnly += async (s, e) => await Con_OnRequestShowOnly(s, e);
            bezierBoard1.OnRequestToUnlockOnly += async (s, e) => await Con_OnRequestToUnlockOnly(s, e);
            //// add dummy data
            //var sp = new RotatingBezierSpline();
            //sp.AddAnchor(new RotatingBezierSplineAnchor(new PointF(34.5F, -2.75F)));
            //sp.AddAnchor(new RotatingBezierSplineAnchor(new PointF(3.6F, -101)));
            //sp.AddAnchor(new RotatingBezierSplineAnchor(new PointF(110, -28)));
            //sp.AddAnchor(new RotatingBezierSplineAnchor(new PointF(24.5F, -209)));
            //sp.AddAnchor(new RotatingBezierSplineAnchor(new PointF(203, -311)));
            //sp.AddAnchor(new RotatingBezierSplineAnchor(new PointF(242, -194)));
            //sp.FlatTipWidth = 40;
            //bezierBoard1.AddItem(sp);
            //bezierBoard1.AddItem(new ImageItem(Properties.Resources.Ain_for_sample_trace, 0, 0));

            //sp = new RotatingBezierSpline();
            //var a0 = new RotatingBezierSplineAnchor(new PointF(400, 300), new PointF(350, 350), 50.0D, 0.0F);
            //var a1 = new RotatingBezierSplineAnchor(new PointF(600, 100), new PointF(450, 50), 50.0D, 0.0F);
            //var a2 = new RotatingBezierSplineAnchor(new PointF(600, 300), new PointF(400, 350), 50.0D, 0.0F);
            //sp.FlatTipWidth = 40;
            //sp.AddAnchor(a0);
            //sp.AddAnchor(a1);
            //sp.AddAnchor(a2);
            ////bezierBoard1.AddItem(sp);
        }
    }
    protected override async Task OnInitializedAsync()
    {
    }

    void setEditingModeMenuItems()
    {
        rotationHandlesToolStripMenuItem_Checked = rotationHandleP.Active;
        curvatureHandlesToolStripMenuItem_Checked = curvatureHandlesP.Active;
        centerPointsToolStripMenuItem_Checked = centerP.Active;
    }
    void centerP_OnActivated()
    {
        if (centerP.Active)
            bezierBoard1.AnchorDrawMode |= AnchorDrawMode.Centers;
        else
            bezierBoard1.AnchorDrawMode &= ~AnchorDrawMode.Centers;
        setEditingModeMenuItems();
    }
    void curvatureHandlesP_OnActivated()
    {
        if (curvatureHandlesP.Active)
            bezierBoard1.AnchorDrawMode |= AnchorDrawMode.CurvatureHandles;
        else
            bezierBoard1.AnchorDrawMode &= ~AnchorDrawMode.CurvatureHandles;
        setEditingModeMenuItems();
    }
    void rotationHandleP_OnActivated()
    {
        if (rotationHandleP.Active)
            bezierBoard1.AnchorDrawMode |= AnchorDrawMode.RotaionHandles;
        else
            bezierBoard1.AnchorDrawMode &= ~AnchorDrawMode.RotaionHandles;
        setEditingModeMenuItems();
    }
    void setDisplayStyleMenuItems()
    {
        splineOnlyToolStripMenuItem_Checked = linearSplineOnly.Active;
        combinedModeToolStripMenuItem_Checked = bothSplinesP.Active;
        inkOnlyToolStripMenuItem_Checked = rotatingSplineOnlyP.Active;
    }
    void bothSplinesP_OnActivated() 
    {
        setDisplayStyleMenuItems();
        bezierBoard1.InkDrawMode = InkDrawMode.Ink | InkDrawMode.Spline | (bezierBoard1.InkDrawMode & InkDrawMode.Images);
    }
    void rotatingSplineOnlyP_OnActivated() 
    {
        setDisplayStyleMenuItems();
        bezierBoard1.InkDrawMode = InkDrawMode.Ink | (bezierBoard1.InkDrawMode & InkDrawMode.Images);
    }
    void linearSplineOnly_OnActivated() 
    {
        setDisplayStyleMenuItems(); 
        bezierBoard1.InkDrawMode = InkDrawMode.Spline | (bezierBoard1.InkDrawMode & InkDrawMode.Images);
    }



    private void BezierBoard1_OnSplineRemoved(object sender, BezierBoard.BezierBoardItemEventArgs e)
    {
        documentLayoutFP_Controls.Remove(documentLayoutFP_Controls.OfType<BezierBoardItemMenuItem>().ToList().Find(ci => ci.Item == e.Item));
    }

    private void BezierBoard1_OnSplineAdded(object sender, BezierBoard.BezierBoardItemEventArgs e)
    {
        BezierBoardItemMenuItem con = null;
        if (e.Item is RotatingBezierSpline)
            con = new CurveMenuItem
                {
                    Item = (RotatingBezierSpline)e.Item,
                    VisibleIcon = visibleIcon,
                    ActiveIcon = activeIcon,
                    VisibleIconDull = visibleIconDull,
                    ActiveIconDull = activeIconDull,
                    Size = 23
                };
        else if (e.Item is ImageItem)
            con = new ImageMenuItem
                {
                    Item = (ImageItem)e.Item,
                    VisibleIcon = visibleIcon,
                    ActiveIcon = activeIcon,
                    VisibleIconDull = visibleIconDull,
                    ActiveIconDull = activeIconDull,
                    Size = 23
                };
        con.OnRequestToShowAll += async(s,e) => await Con_OnRequestToShowAll(s, e);
        con.OnRequestToUnlockAll += async(s,e) => await Con_OnRequestToUnlockAll(s, e);
        con.OnRequestShowOnly += async(s,e) => await Con_OnRequestShowOnly(s, e);
        con.OnRequestToUnlockOnly += async(s,e) => await Con_OnRequestToUnlockOnly(s, e);

        void MoveItem(List<BezierBoardItemMenuItem> list, BezierBoardItemMenuItem item, int newIndex)
        {
            var oldIndex = list.IndexOf(item);
            if (oldIndex < 0 || oldIndex >= list.Count || newIndex < 0 || newIndex >= list.Count)
                return;

            list.RemoveAt(oldIndex);

            // If the item is moved to a position after the old index, adjust the new index
            if (newIndex > oldIndex)
                newIndex--;
            if (newIndex < 0)
                newIndex = 0;

            list.Insert(newIndex, item);
        }

        con.OnMoveDownRequest += (s, e2) =>
        {
            MoveItem(documentLayoutFP_Controls, con, documentLayoutFP_Controls.IndexOf(con) + 1);
            for (int i = 0; i < documentLayoutFP_Controls.Count; i++)
                ((BezierBoardItemMenuItem)documentLayoutFP_Controls[i]).Item.Index = i;
        };
        con.OnMoveUpRequest += (s, e2) =>
        {
            MoveItem(documentLayoutFP_Controls, con, documentLayoutFP_Controls.IndexOf(con) - 1);
            for (int i = 0; i < documentLayoutFP_Controls.Count; i++)
                ((BezierBoardItemMenuItem)documentLayoutFP_Controls[i]).Item.Index = i;
        };
        documentLayoutFP_Controls.Add(con);
    }

    private async Task Con_OnRequestToUnlockOnly(object sender, EventArgs e)
    {
        foreach (var cmi in documentLayoutFP_Controls.OfType<CurveMenuItem>())
        {
            if (cmi != sender && cmi.Item != sender)
                await cmi.SplineEnabled.SetActive(false);

        }
    }

    private async Task Con_OnRequestToUnlockAll(object sender, EventArgs e)
    {
        foreach (var cmi in documentLayoutFP_Controls.OfType<CurveMenuItem>())
            await cmi.SplineEnabled.SetActive(true);
    }


    private async Task Con_OnRequestShowOnly(object sender, EventArgs e)
    {
        foreach (var cmi in documentLayoutFP_Controls.OfType<CurveMenuItem>())
        {
            if (cmi != sender && cmi.Item != sender)
                await cmi.SplineVisible.SetActive(false);
        }
    }
    private async Task Con_OnRequestToShowAll(object sender, EventArgs e)
    {
        foreach (var cmi in documentLayoutFP_Controls.OfType<CurveMenuItem>())
            await cmi.SplineVisible.SetActive(true);
    }

    private void backgroundImagesToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        backgroundImagesToolStripMenuItem = !backgroundImagesToolStripMenuItem;
        if (backgroundImagesToolStripMenuItem)
            bezierBoard1.InkDrawMode |= InkDrawMode.Images;
        else
            bezierBoard1.InkDrawMode &= ~InkDrawMode.Images;
        bezierBoard1.Invalidate();
        StateHasChanged();
    }
    private async Task combinedModeToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        await bothSplinesP.SetActive(true);
    }
    private async Task inkOnlyToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        await rotatingSplineOnlyP.SetActive(true);
    }
    private async Task splineOnlyToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        await linearSplineOnly.SetActive(true);
    }


    private async Task centerPointsToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        await centerP.SetActive(!centerP.Active);
        centerPointsToolStripMenuItem_Checked = centerP.Active;
    }

    private async Task curvatureHandlesToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        await curvatureHandlesP.SetActive(!curvatureHandlesP.Active);
        curvatureHandlesToolStripMenuItem_Checked = curvatureHandlesP.Active;
    }

    private async Task rotationHandlesToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        await rotationHandleP.SetActive(!rotationHandleP.Active);
        rotationHandlesToolStripMenuItem_Checked = rotationHandleP.Active;
    }

    private void gridToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        bezierBoard1.GridEnabled = !bezierBoard1.GridEnabled;
        gridToolStripMenuItem_Checked = bezierBoard1.GridEnabled;
        // also disable the axis selection. There is no point having it if the whole grid is disabled.
        xYAxisToolStripMenuItem_Enabled = gridToolStripMenuItem_Checked;
        xYAxisToolStripMenuItem_Checked = bezierBoard1.XYLinesEnabled;
    }

    private void scaleToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        bezierBoard1.ScaleEnabled = !bezierBoard1.ScaleEnabled;
        scaleToolStripMenuItem_Checked = bezierBoard1.ScaleEnabled;
    }

    private void xYAxisToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        bezierBoard1.XYLinesEnabled = !bezierBoard1.XYLinesEnabled;
        xYAxisToolStripMenuItem_Checked = bezierBoard1.XYLinesEnabled;
    }

    private void aboutToolStripMenuItem_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        //Process.Start("explorer", "https://github.com/umartechboy/Thesis_2017-MS-MC-17");
    }

    private void aboutToolStripMenuItem1_Click(Microsoft.AspNetCore.Components.Web.MouseEventArgs e)
    {
        aboutDialogOpen = true;
    }

}